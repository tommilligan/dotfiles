[include]
path = .gitconfig-user

[push]
default = simple

[alias]
# Show a pretty graph. Add --all to see all tags
review = log --oneline --graph --decorate

# Rebase the brach onto its common ancestor with master
squash = !git rebase -i $(git merge-base HEAD master)

# Delete a branch both locally and on origin
purge = "!purge() { echo \"> delete merged branches\" && git branch --list --merged master | rg -v ' master$' | xargs git branch -d; }; purge"
remote-purge = "!remote_purge() { echo \"> $1: fetch\" && git fetch \"$1\" && echo \"> $1: prune\" && git remote prune \"$1\" && echo \"> $1: delete merged branches\" && git branch --list --remote --merged \"$1/master\" | rg \".*\\b${1}/(\\S+)\\b.*\" -r '$1' | rg -v '^(master|staging|HEAD)$' | xargs git push \"$1\" --delete; }; remote_purge"

# See how the current branch differs from common ancestor
# If this is empty, the branch has probably been merged with master
diverge = "!diverge() { local branch_name=$1; shift; git diff $branch_name...HEAD $@; }; diverge"

# Push a branch to origin and set the upstream tracking branch as the same name
post = "!post() { git push -u origin \"$(git rev-parse --abbrev-ref HEAD)\"; }; post"

[commit]
gpgsign = true

[core]
excludesfile = ~/.gitignore_global

[color "diff"]
commit = green
meta = yellow
frag = cyan
old = red
new = green
whitespace = red reverse

# Add diff-highlight. For this to work, diff-highlight must be in your path.
# You might like to set a symlink, e.g.
# sudo ln -s /usr/share/doc/git/contrib/diff-highlight/diff-highlight /usr/bin/local/diff-highlight
[pager]
diff = diff-highlight | less

[color "diff-highlight"]
oldNormal = red
oldHighlight = red bold 52
newNormal = green
newHighlight = green bold 22
